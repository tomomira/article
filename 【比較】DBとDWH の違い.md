# 【比較】DBとDWHの違い

データ管理の世界で中心的な役割を果たす「データベース（DB）」と「データウェアハウス（DWH）」。この2つはデータを格納するという点で似ていますが、その目的、設計、使われ方は大きく異なります。このドキュメントでは、両者の違いを明確にし、それぞれの役割を解説します。

## 概要

| 項目 | データベース (DB) | データウェアハウス (DWH) |
| --- | --- | --- |
| **主目的** | **記録 (Record)** | **分析 (Analyze)** |
| **処理** | OLTP (オンライン・トランザクション処理) | OLAP (オンライン分析処理) |
| **対象データ** | 最新のデータ、リアルタイムのデータ | 過去から現在までの大量な履歴データ |
| **処理速度** | 高速な読み書き（Read/Write） | 高速な読み取り（Read）と集計 |
| **データ構造** | 正規化されていることが多い | 非正規化されていることが多い |
| **利用者** | アプリケーション、業務担当者 | データアナリスト、経営層、意思決定者 |

一言で言うと、**DBは「日々の業務を遂行するための、現在のデータを扱うシステム」** であり、**DWHは「意思決定のために、過去からの膨大なデータを分析するためのシステム」** です。

---

## 各システムの詳細

### 1. データベース (DB: Database)

データベースは、アプリケーションやシステムの**日々の業務処理（トランザクション）**を支えるために設計されています。例えば、ECサイトの在庫管理、銀行の入出金記録、SNSの投稿など、リアルタイムでのデータの**作成(Create)、読み出し(Read)、更新(Update)、削除(Delete)** が頻繁に発生する処理（OLTP）に使われます。

#### 主な特徴

- **リアルタイム性**: 常に最新の状態を保ち、高速なトランザクション処理が求められます。
- **正規化**: データの重複をなくし、一貫性を保つために「正規化」というデータ設計手法が用いられます。これにより、効率的なデータの更新が可能になります。
- **小規模なクエリ**: 一度に扱うデータ量は比較的小さく、「特定の顧客の注文履歴を見る」といった単純なクエリが中心です。
- **データソース**: 主に単一のアプリケーションからデータが入力されます。
- **例**: MySQL, PostgreSQL, Oracle Database, SQL Server など

**DBの役割は、ビジネスの最前線で発生する出来事を、正確かつ迅速に記録・管理することです。**

### 2. データウェアハウス (DWH: Data Warehouse)

データウェアハウスは、組織内の様々なシステム（複数のDB、基幹システム、外部サービスなど）からデータを集約し、**分析やレポート作成、意思決定支援**のために設計されたシステムです。過去からのデータを時系列で蓄積し、ビジネス全体の傾向を分析する処理（OLAP）に使われます。

#### 主な特徴

- **履歴データ**: 数年から数十年にわたる膨大な量の履歴データを保持します。データは更新されず、追加されていくのが基本です。
- **非正規化**: 分析クエリのパフォーマンスを向上させるため、あえてデータを重複させてテーブルを結合しておく「非正規化」という設計（スタースキーマ、スノーフレークスキーマなど）が用いられます。
- **大規模なクエリ**: 大量のデータを横断的に集計・分析する複雑なクエリが中心です。「過去5年間の月別・地域別売上トレンドを分析する」といった処理を行います。
- **統合されたデータ**: 複数のソースからデータを抽出し（Extract）、分析しやすい形式に変換・加工し（Transform）、DWHに格納（Load）する「ETL」という処理を経て、データが統合されます。
- **例**: Google BigQuery, Amazon Redshift, Snowflake, Teradata など

**DWHの役割は、組織に散らばるデータを一箇所に集め、過去から現在に至るまでの全体像を可視化し、未来の戦略を立てるための洞察を得ることです。**

---

## DBとDWHの関係性

DBとDWHは競合するものではなく、**データ活用の流れの中で異なる役割を担う、補完的な関係**にあります。

一般的なデータの流れは以下のようになります。

1.  ECサイトの**DB**、販売管理システムの**DB**、顧客管理システムの**DB**など、日々の業務でデータが生成・更新される。
2.  定期的に（例：夜間バッチで）これらの**DB**からデータが抽出（Extract）される。
3.  抽出されたデータは、分析しやすいように名寄せやクレンジングなどの変換・加工（Transform）が行われる。
4.  加工されたデータが**DWH**に格納（Load）され、蓄積されていく。
5.  アナリストや経営層が、BIツールなどを使って**DWH**のデータを分析し、経営判断に役立てる。

このように、DBが「データ発生源」であるのに対し、DWHは「データ集積・分析基盤」として機能します。

## まとめ

| 観点 | データベース (DB) | データウェアハウス (DWH) |
| --- | --- | --- |
| **役割** | **記録**と**管理** | **分析**と**意思決定支援** |
| **例えるなら** | 日々の取引を記録する「**レジ**」や「**会計帳簿**」 | 過去からの全取引を分析する「**経営分析室**」 |
| **時間軸** | 「今」を扱う | 「過去から今」までを扱う |
| **最適化対象** | 高速な書き込み・更新 | 高速な読み取り・集計 |

ビジネスの目的やデータの用途に応じて、DBとDWHを正しく理解し、使い分けることが、効果的なデータ活用戦略の鍵となります。 